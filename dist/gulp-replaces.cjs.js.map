{"version":3,"file":"gulp-replaces.cjs.js","sources":["../src/index.js"],"sourcesContent":["import es from 'event-stream';\n\nconst polyfill = () => {\n  const reduce = Function.bind.call(Function.call, Array.prototype.reduce);\n  const isEnumerable = Function.bind.call(Function.call, Object.prototype.propertyIsEnumerable);\n  const concat = Function.bind.call(Function.call, Array.prototype.concat);\n  const keys = Reflect.ownKeys;\n\n  if (!Object.entries) {\n    Object.entries = function entries(O) {\n      return reduce(keys(O), (e, k) => concat(e, typeof k === 'string' && isEnumerable(O, k) ? [[k, O[k]]] : []), []);\n    };\n  }\n};\n\nexport default (obj) => {\n  polyfill();\n\n  const arr = Object.entries(obj);\n\n  const doReplace = (file, callback) => {\n    const isStream = file.contents && typeof file.contents.on === 'function' && typeof file.contents.pipe === 'function';\n    const isBuffer = file.contents instanceof Buffer;\n\n    if (isStream) {\n      file.contents = file.contents.pipe(es.map((chunk, done) => {\n        for (let i = 0, l = arr.length; i < l; i++) {\n          const search = arr[i][0];\n          const replace = arr[i][1];\n\n          const result = String(chunk).split(search).join(replace);\n\n          chunk = Buffer.from(result);\n        }\n\n        done(null, chunk);\n      }));\n    }\n\n    if (isBuffer) {\n      for (let i = 0, l = arr.length; i < l; i++) {\n        const search = arr[i][0];\n        const replace = arr[i][1];\n\n        file.contents = Buffer.from(String(file.contents).split(search).join(replace));\n      }\n    }\n\n    callback(null, file);\n  };\n\n  return es.map(doReplace);\n};\n"],"names":["const","let"],"mappings":"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"}